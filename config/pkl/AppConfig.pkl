@go.Package { name = "configmgr/gen/appconfig" }

module AppConfig

import "package://pkg.pkl-lang.org/pkl-go/pkl.golang@0.5.3#/go.pkl"

// just a app name without space, caps key
appName: String

// just a unique id for each msvc
appKey: String

/// The hostname that this server responds to.
hostname: String

/// The port to listen on.
port: String

/// The environment to deploy to.
environment: Environment

logFile: String

/// The database connection for this application
database: Database

nats: Nats

graphql: Graphql

class Nats {
  appKey: String
  url: String
}

class Database {
  /// The username for this database.
  username: String

  /// The password for this database.
  password: String

  /// The remote host for this database.
  host: String

  /// The remote port for this database.
  port: UInt16

  /// The name of the database.
  dbName: String
  
  sslmode: String
}

class Graphql {
  // internal key to access the playground
  key: String
}

typealias Environment = "dev"|"stag"|"prod"